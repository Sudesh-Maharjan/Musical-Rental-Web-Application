{% extends 'rent/basic.html' %}

{% block title%} {{product.product_name}}Product View {% endblock %}

{% block css %}
{{ block.super }}
{% endblock %}
<!-- <script src="/MusicalRent/rent/static/HomePages/HomePage.js"></script>
<script src="static/RegisterPages/Register_validation.js"></script> -->

{% block body %}
this is body of Product View page
<div class="product-container-main-page">
    <h1>{{product.product_name}}</h1>
    <div class="image-product-main">
        <img src="/media/{{product.image}}" width="300px" height="350px">
    </div>
    <p class="price-product-main-page">Price: {{product.price}}</p>
    <p class="description-product-main-page">{{product.desc}}</p>
    <button class="Buy Now-product-view">Buy Now</button>
    <button class="add-to-cart-product-view">Add To Cart</button>
</div>











{% block js %}
<script>
  console.log("working");
  //cart logic
  if(localStorage.getItem('cart') == null){
    var cart = {}
  }else{
    //localstorage ma store gareko item lai get gareko
    cart = JSON.parse(localStorage.getItem('cart'));
  }
  function updateCartCounter(){
 let cartcounter = document.getElementById("cart-counter")
 let itemcount = Object.keys(cart).length;
 cartcounter.textContent = itemcount;
  }

var cart_selected = document.querySelectorAll('.add-to-cart');
cart_selected.forEach(function(cart_selected){
cart_selected.addEventListener('click', function(){
console.log("clicked");
var idstr = this.id.toString();
console.log(idstr);
if(idstr != undefined){
  if(cart[idstr] === undefined){
    cart[idstr] = 1;
  }else{
  cart[idstr] = cart[idstr] + 1;
  }
  updateCartCounter();
localStorage.setItem('cart', JSON.stringify(cart));

}
console.log(cart);
});
});
updateCartCounter();
</script>
{% endblock%}
{% endblock %}